(()=>{"use strict";var e,a={298:()=>{const e=window.wp.blocks,a=window.wp.i18n,t=window.wp.blockEditor,r=window.React,s=(e,a)=>{const[t,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[n,c]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{if(e){o(!0),c(null);try{const t=await(async(e,a=1,t=20)=>{const r=`https://pixabay.com/api/?key=45979271-945d910b95e96769c55111ae5&q=${encodeURIComponent(e)}&page=${a}&per_page=${t}`;try{const e=await async function(e,a={}){try{const{method:t="GET",headers:r={},body:s,responseType:i="json"}=a,o=await fetch(e,{method:t,headers:{...r},body:s?JSON.stringify(s):void 0});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status} - ${o.statusText}`);let n;if("json"===i)n=await o.json();else{if("text"!==i)throw new Error("Unsupported response type");n=await o.text()}return n}catch(e){throw console.error("Fetch request failed:",e),e}}(r,{method:"GET",responseType:"json"});return e}catch(e){throw console.error("Error fetching images from Pixabay:",e),e}})(e,a);s(t.hits)}catch(e){console.error("Error fetching images:",e),c("Failed to fetch images.")}finally{o(!1)}}})()}),[e,a]),{fetchedImages:t,loading:i,error:n}},i=window.ReactJSXRuntime,o=({searchTerm:e,handleSearchChange:t})=>(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text",value:e,onChange:t,placeholder:(0,a.__)("Search for images...","pixabay-image-selector"),style:{marginBottom:"10px",width:"100%",padding:"8px"}})}),n=({fetchedImages:e,handleImageSelect:a})=>(0,i.jsx)("div",{className:"image-gallery",children:e.map((e=>(0,i.jsx)("div",{className:"image-item",onClick:()=>a(e.webformatURL),children:(0,i.jsx)("img",{src:e.webformatURL,alt:e.tags})},e.id)))}),c=({currentPage:e,handlePrevPage:t,handleNextPage:r})=>(0,i.jsxs)("div",{className:"pagination",children:[(0,i.jsx)("button",{onClick:t,disabled:1===e,children:(0,a.__)("Previous","pixabay-image-selector")}),(0,i.jsxs)("span",{children:[(0,a.__)("Page:","pixabay-image-selector")," ",e]}),(0,i.jsx)("button",{onClick:r,children:(0,a.__)("Next","pixabay-image-selector")})]}),l=({selectedImage:e})=>(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{children:(0,a.__)("Selected Image:","pixabay-image-selector")}),(0,i.jsx)("img",{src:e,alt:"Selected",style:{width:"100%",height:"auto"}})]});(0,e.registerBlockType)("pixabay/image-selector",{edit:({attributes:e,setAttributes:d})=>{const[h,g]=(0,r.useState)(e.selectedImage||""),[m,p]=(0,r.useState)("nature"),[x,u]=(0,r.useState)(1),{fetchedImages:f,loading:y,error:b}=s(m,x);return(0,i.jsxs)("div",{...(0,t.useBlockProps)(),children:[(0,i.jsx)("h3",{children:(0,a.__)("Select an Image:","pixabay-image-selector")}),(0,i.jsx)(o,{searchTerm:m,handleSearchChange:e=>{p(e.target.value),u(1)}}),y&&(0,i.jsx)("p",{children:(0,a.__)("Loading images...","pixabay-image-selector")}),b&&(0,i.jsx)("p",{children:b}),!y&&!b&&(0,i.jsx)(n,{fetchedImages:f,handleImageSelect:e=>{g(e),d({selectedImage:e})}}),(0,i.jsx)(c,{currentPage:x,handlePrevPage:()=>{u((e=>Math.max(e-1,1)))},handleNextPage:()=>{u((e=>e+1))}}),h&&(0,i.jsx)(l,{selectedImage:h})]})},save:({attributes:e})=>(0,i.jsx)("div",{...t.useBlockProps.save(),className:"wp-block-pixabay-image-selector",children:e.selectedImage&&(0,i.jsxs)("div",{className:"image-container",children:[" ",(0,i.jsx)("img",{src:e.selectedImage,alt:"Selected"})]})})})}},t={};function r(e){var s=t[e];if(void 0!==s)return s.exports;var i=t[e]={exports:{}};return a[e](i,i.exports,r),i.exports}r.m=a,e=[],r.O=(a,t,s,i)=>{if(!t){var o=1/0;for(d=0;d<e.length;d++){t=e[d][0],s=e[d][1],i=e[d][2];for(var n=!0,c=0;c<t.length;c++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](t[c])))?t.splice(c--,1):(n=!1,i<o&&(o=i));if(n){e.splice(d--,1);var l=s();void 0!==l&&(a=l)}}return a}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[t,s,i]},r.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={57:0,350:0};r.O.j=a=>0===e[a];var a=(a,t)=>{var s,i,o=t[0],n=t[1],c=t[2],l=0;if(o.some((a=>0!==e[a]))){for(s in n)r.o(n,s)&&(r.m[s]=n[s]);if(c)var d=c(r)}for(a&&a(t);l<o.length;l++)i=o[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},t=self.webpackChunkpixabay_image_selector=self.webpackChunkpixabay_image_selector||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var s=r.O(void 0,[350],(()=>r(298)));s=r.O(s)})();